# Install with:
#   sudo install -m 644 gh-actions-runner.service /etc/systemd/system/
#   sudo systemctl daemon-reload
#   sudo systemctl enable gh-actions-runner
# Run with:
#   sudo systemctl start gh-actions-runner
# Stop with:
#   sudo systemctl stop gh-actions-runner
# See live logs with:
#   journalctl -f -u gh-actions-runner.service --no-hostname --no-tail
[Unit]
Description=GitHub Actions Runner Container
After=docker.service
Requires=docker.service
[Service]
TimeoutStartSec=0
Restart=always
ExecStartPre=-/usr/bin/docker compose stop %N
ExecStartPre=-/usr/bin/docker compose rm %N
ExecStartPre=-/usr/bin/docker pull lurklab/gh-actions-runner:latest
ExecStart=/usr/bin/docker compose \
                          -f /etc/gh-actions-runner-compose.yml \
                          --env-file /etc/gh-actions-runner.env \
                          up --scale worker=4
[Install]
WantedBy=multi-user.target
